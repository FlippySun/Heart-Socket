{
  "name": "heart-socket",
  "displayName": "Heart Socket - Apple Watch Heart Rate Monitor",
  "description": "Real-time Apple Watch heart rate display in VS Code status bar. Supports HDS, HypeRate, Pulsoid, and custom WebSocket sources.",
  "version": "0.1.0",
  "publisher": "FlippySun",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/FlippySun/Heart-Socket"
  },
  "homepage": "https://github.com/FlippySun/Heart-Socket#readme",
  "bugs": {
    "url": "https://github.com/FlippySun/Heart-Socket/issues"
  },
  "icon": "images/icon.png",
  "galleryBanner": {
    "color": "#1e1e2e",
    "theme": "dark"
  },
  "markdown": "github",
  "qna": "false",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other",
    "Visualization"
  ],
  "keywords": [
    "heart rate",
    "apple watch",
    "health",
    "monitor",
    "websocket",
    "bpm",
    "heart rate monitor",
    "fitness",
    "coding health",
    "pulsoid",
    "hyperate"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "heartSocket.connect",
        "title": "Heart Socket: Connect",
        "icon": "$(plug)"
      },
      {
        "command": "heartSocket.disconnect",
        "title": "Heart Socket: Disconnect",
        "icon": "$(debug-disconnect)"
      },
      {
        "command": "heartSocket.switchProvider",
        "title": "Heart Socket: Switch Provider"
      },
      {
        "command": "heartSocket.showStats",
        "title": "Heart Socket: Show Heart Rate Stats"
      },
      {
        "command": "heartSocket.quickActions",
        "title": "Heart Socket: Quick Actions"
      }
    ],
    "configuration": {
      "title": "Heart Socket",
      "properties": {
        "heartSocket.provider": {
          "type": "string",
          "enum": [
            "hds",
            "hyperate",
            "pulsoid",
            "custom"
          ],
          "enumDescriptions": [
            "Health Data Server (推荐，Apple Watch → 本地 WiFi → VSCode，零配置)",
            "HypeRate (需要 API Token + Session ID)",
            "Pulsoid (需要 Access Token)",
            "自定义 WebSocket 服务器"
          ],
          "default": "hds",
          "description": "心率数据源类型"
        },
        "heartSocket.websocketUrl": {
          "type": "string",
          "default": "ws://localhost:8080",
          "description": "WebSocket 连接地址（HDS / 自定义数据源使用）"
        },
        "heartSocket.apiToken": {
          "type": "string",
          "default": "",
          "description": "API Token（HypeRate / Pulsoid 使用）"
        },
        "heartSocket.sessionId": {
          "type": "string",
          "default": "",
          "description": "Session ID（HypeRate 使用）"
        },
        "heartSocket.autoConnect": {
          "type": "boolean",
          "default": false,
          "description": "VS Code 启动时自动连接心率监测"
        },
        "heartSocket.serverPort": {
          "type": "number",
          "default": 8580,
          "minimum": 1024,
          "maximum": 65535,
          "description": "HDS 模式 WebSocket Server 监听端口（Apple Watch 连接到此端口）"
        },
        "heartSocket.alertHighBpm": {
          "type": "number",
          "default": 150,
          "minimum": 80,
          "maximum": 220,
          "description": "高心率告警阈值 (BPM)"
        },
        "heartSocket.alertLowBpm": {
          "type": "number",
          "default": 50,
          "minimum": 30,
          "maximum": 80,
          "description": "低心率告警阈值 (BPM)"
        },
        "heartSocket.alertCooldown": {
          "type": "number",
          "default": 60,
          "minimum": 10,
          "maximum": 600,
          "description": "告警冷却时间（秒），避免频繁弹窗"
        },
        "heartSocket.heartRateJsonPath": {
          "type": "string",
          "default": "heartRate",
          "description": "自定义数据源中心率字段的 JSON 路径（用 . 分隔，如 data.heart_rate）"
        },
        "heartSocket.caloriesJsonPath": {
          "type": "string",
          "default": "",
          "markdownDescription": "自定义数据源中**卡路里**字段的 JSON 路径（如 `data.calories`）。留空表示不启用。仅 Custom WebSocket 模式有效。"
        },
        "heartSocket.stepCountJsonPath": {
          "type": "string",
          "default": "",
          "markdownDescription": "自定义数据源中**步数**字段的 JSON 路径（如 `data.steps`）。留空表示不启用。仅 Custom WebSocket 模式有效。"
        },
        "heartSocket.bloodOxygenJsonPath": {
          "type": "string",
          "default": "",
          "markdownDescription": "自定义数据源中**血氧 (SpO2)** 字段的 JSON 路径（如 `data.spo2`）。留空表示不启用。仅 Custom WebSocket 模式有效。"
        },
        "heartSocket.distanceJsonPath": {
          "type": "string",
          "default": "",
          "markdownDescription": "自定义数据源中**距离**字段的 JSON 路径（如 `data.distance`）。留空表示不启用。仅 Custom WebSocket 模式有效。"
        },
        "heartSocket.speedJsonPath": {
          "type": "string",
          "default": "",
          "markdownDescription": "自定义数据源中**速度**字段的 JSON 路径（如 `data.speed`）。留空表示不启用。仅 Custom WebSocket 模式有效。"
        },
        "heartSocket.bodyMassJsonPath": {
          "type": "string",
          "default": "",
          "markdownDescription": "自定义数据源中**体重 (kg)** 字段的 JSON 路径（如 `data.bodyMass`）。留空表示不启用。仅 Custom WebSocket 模式有效。"
        },
        "heartSocket.bmiJsonPath": {
          "type": "string",
          "default": "",
          "markdownDescription": "自定义数据源中**BMI** 字段的 JSON 路径（如 `data.bmi`）。留空表示不启用。仅 Custom WebSocket 模式有效。"
        },
        "heartSocket.statusBarPosition": {
          "type": "string",
          "enum": [
            "left",
            "right"
          ],
          "default": "left",
          "description": "状态栏显示位置"
        },
        "heartSocket.showHeartbeatAnimation": {
          "type": "boolean",
          "default": true,
          "description": "启用心跳动画效果"
        },
        "heartSocket.zones": {
          "type": "object",
          "default": {
            "deepRelax": 58,
            "relax": 65,
            "calm": 72,
            "lightFocus": 80,
            "focused": 90,
            "tense": 105,
            "stressed": 120
          },
          "markdownDescription": "心率区间阈值配置（BPM）— 针对编程场景优化的9级细粒度划分",
          "properties": {
            "deepRelax": {
              "type": "number",
              "description": "深度放松上限（深度休息、冥想）"
            },
            "relax": {
              "type": "number",
              "description": "放松上限（休息、随意浏览）"
            },
            "calm": {
              "type": "number",
              "description": "平静上限（阅读文档、Review 代码）"
            },
            "lightFocus": {
              "type": "number",
              "description": "轻度集中上限（简单编码、重构）"
            },
            "focused": {
              "type": "number",
              "description": "专注上限（深度编码、解决问题）"
            },
            "tense": {
              "type": "number",
              "description": "紧张上限（Debug、赶 deadline）"
            },
            "stressed": {
              "type": "number",
              "description": "高压上限（超过此值为异常）"
            }
          }
        },
        "heartSocket.enableMotion": {
          "type": "boolean",
          "default": true,
          "description": "启用 Motion 传感器数据分析（需 HDS 支持）"
        },
        "heartSocket.sedentaryMinutes": {
          "type": "number",
          "default": 45,
          "minimum": 10,
          "maximum": 120,
          "description": "久坐提醒阈值（分钟）"
        },
        "heartSocket.postureAlertSeconds": {
          "type": "number",
          "default": 30,
          "minimum": 10,
          "maximum": 300,
          "description": "不良姿态提醒阈值（秒）"
        },
        "heartSocket.showCodingIntensity": {
          "type": "boolean",
          "default": true,
          "description": "在状态栏显示敲代码强度图标"
        },
        "heartSocket.showFlowState": {
          "type": "boolean",
          "default": true,
          "description": "在 tooltip 显示心流状态"
        },
        "heartSocket.showSlackingIndex": {
          "type": "boolean",
          "default": true,
          "description": "在 tooltip 显示摸鱼指数"
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run build",
    "build": "node esbuild.js --production",
    "watch": "node esbuild.js --watch",
    "lint": "eslint src --ext ts",
    "package": "vsce package"
  },
  "devDependencies": {
    "@types/node": "^20.11.0",
    "@types/vscode": "^1.85.0",
    "@types/ws": "^8.5.10",
    "esbuild": "^0.20.0",
    "typescript": "^5.3.3"
  },
  "dependencies": {
    "ws": "^8.16.0"
  }
}
